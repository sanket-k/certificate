<head>
  <title>Certificate</title>
  <h1 id = "output_header_line1" style = "text-align:center;"><big><strong><bold><u>Certification</h1>
</head>

<body>
  <fieldset>
  <br>
  <legend><big><b>Add Organization</b></big></legend>
  <input id="organization_name" type="text" placeholder="Organization Name">
  <input id="organization_address" type="text" placeholder="Organization Address">
  <input id="organization_details" type="text" placeholder="Organization Details"><br>
  <button id="button_add_organization">Add Organization</button>
  </fieldset>

  <br>
  
  <fieldset>
  <legend><big><b>Organization details</b></big></legend>
  <input id="get_organization_address" type="text" placeholder="Enter Organization Address"><br>
  <button id="button_get_organization_details">Get Details</button><br>
  <pre id="organization_details_name"> </pre><br>
  <pre id="organization_details_details"> </pre><br>
  </fieldset>

  <br>

  <fieldset>
  <legend><big><b>Certify</b></big></legend>
  <input id="certify_UIN" type="text" placeholder="UIN"><br>
  <input id="certify_first_name" type="text" placeholder="First Name"><br>
  <input id="certify_last_name" type="text" placeholder="Last Name"><br>
  <input id="certify_certified_in" type="text" placeholder="Feild of Certification"><br>
  <input id="certify_date" type="text" placeholder="Date"><br>
  <button id="button_certify">Certify</button><br>
  </fieldset>

  <br>

  <fieldset>
  <legend><big><b>View Certificate</b></big></legend>
  <input id="view_certificate_UIN" type="text" placeholder="UIN">
  <button id="button_view_certificate"> View Certificate</button>
  <pre id="view_certificate_line1" style="text-align: center"> <font size="7"> </font> </pre><br>
  <pre id="view_certificate_line2" style="text-align: center"> </pre><br>
  <pre id="view_certificate_line3" style="text-align: center"> </pre><br>
  <pre id="view_certificate_line4" style="text-align: center"> </pre><br>
  <pre id="view_certificate_line5" style="text-align: center"> </pre><br>
  <pre id="view_certificate_line6" style="text-align: center"> </pre><br>
  <pre id="view_certificate_line7" style="text-align: center"> </pre><br>
  </fieldset>

  <script>
    
    //******MAKE CHANGES HERE if new conrtact is created*********
    
    //contract address
    var contractAddress = "0x0cd518b612f49f49cddc339a59a10452781d5b77";
    
    //aplication binary interface for interaction with contract
    var abi = [{"constant":false,"inputs":[],"name":"kill","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_UIN","type":"bytes32"}],"name":"displayCertificates","outputs":[{"name":"","type":"string"},{"name":"","type":"string"},{"name":"","type":"string"},{"name":"","type":"string"},{"name":"","type":"address"},{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_address","type":"address"}],"name":"organizationInfoDetails","outputs":[{"name":"","type":"string"},{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_UIN","type":"bytes32"},{"name":"_firstName","type":"string"},{"name":"_lastName","type":"string"},{"name":"_certificationIn","type":"string"},{"name":"_date","type":"string"}],"name":"certifyStudents","outputs":[{"name":"done","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_address","type":"address"},{"name":"_organizationName","type":"string"},{"name":"_organizationDetails","type":"string"}],"name":"addOrganizations","outputs":[{"name":"done","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"}];
    
    var data = "6060604052341561000f57600080fd5b336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555061117d8061005e6000396000f30060606040526000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806341c0e1b514610069578063837f0c081461007e578063bd882a1c14610301578063fa3ae2241461041f578063fd4898471461056a57600080fd5b341561007457600080fd5b61007c610641565b005b341561008957600080fd5b6100a36004808035600019169060200190919050506106d6565b60405180806020018060200180602001806020018773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018060200186810386528c818151815260200191508051906020019080838360005b8381101561012557808201518184015260208101905061010a565b50505050905090810190601f1680156101525780820380516001836020036101000a031916815260200191505b5086810385528b818151815260200191508051906020019080838360005b8381101561018b578082015181840152602081019050610170565b50505050905090810190601f1680156101b85780820380516001836020036101000a031916815260200191505b5086810384528a818151815260200191508051906020019080838360005b838110156101f15780820151818401526020810190506101d6565b50505050905090810190601f16801561021e5780820380516001836020036101000a031916815260200191505b50868103835289818151815260200191508051906020019080838360005b8381101561025757808201518184015260208101905061023c565b50505050905090810190601f1680156102845780820380516001836020036101000a031916815260200191505b50868103825287818151815260200191508051906020019080838360005b838110156102bd5780820151818401526020810190506102a2565b50505050905090810190601f1680156102ea5780820380516001836020036101000a031916815260200191505b509b50505050505050505050505060405180910390f35b341561030c57600080fd5b610338600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610b58565b604051808060200180602001838103835285818151815260200191508051906020019080838360005b8381101561037c578082015181840152602081019050610361565b50505050905090810190601f1680156103a95780820380516001836020036101000a031916815260200191505b50838103825284818151815260200191508051906020019080838360005b838110156103e25780820151818401526020810190506103c7565b50505050905090810190601f16801561040f5780820380516001836020036101000a031916815260200191505b5094505050505060405180910390f35b341561042a57600080fd5b61055060048080356000191690602001909190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610d2d565b604051808215151515815260200191505060405180910390f35b341561057557600080fd5b610627600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610f01565b604051808215151515815260200191505060405180910390f35b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561069c57600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b6106de611098565b6106e6611098565b6106ee611098565b6106f6611098565b6000610700611098565b600260008860001916600019168152602001908152602001600020600001600260008960001916600019168152602001908152602001600020600101600260008a60001916600019168152602001908152602001600020600201600260008b60001916600019168152602001908152602001600020600301600260008c6000191660001916815260200190815260200160002060040160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1660016000600260008f6000191660001916815260200190815260200160002060040160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600001858054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156108cc5780601f106108a1576101008083540402835291602001916108cc565b820191906000526020600020905b8154815290600101906020018083116108af57829003601f168201915b50505050509550848054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156109685780601f1061093d57610100808354040283529160200191610968565b820191906000526020600020905b81548152906001019060200180831161094b57829003601f168201915b50505050509450838054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610a045780601f106109d957610100808354040283529160200191610a04565b820191906000526020600020905b8154815290600101906020018083116109e757829003601f168201915b50505050509350828054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610aa05780601f10610a7557610100808354040283529160200191610aa0565b820191906000526020600020905b815481529060010190602001808311610a8357829003601f168201915b50505050509250808054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610b3c5780601f10610b1157610100808354040283529160200191610b3c565b820191906000526020600020905b815481529060010190602001808311610b1f57829003601f168201915b5050505050905095509550955095509550955091939550919395565b610b60611098565b610b68611098565b600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600001600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600101818054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610c815780601f10610c5657610100808354040283529160200191610c81565b820191906000526020600020905b815481529060010190602001808311610c6457829003601f168201915b50505050509150808054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610d1d5780601f10610cf257610100808354040283529160200191610d1d565b820191906000526020600020905b815481529060010190602001808311610d0057829003601f168201915b5050505050905091509150915091565b6000600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610dcb57600080fd5b846002600088600019166000191681526020019081526020016000206000019080519060200190610dfd9291906110ac565b50836002600088600019166000191681526020019081526020016000206001019080519060200190610e309291906110ac565b50826002600088600019166000191681526020019081526020016000206002019080519060200190610e639291906110ac565b50816002600088600019166000191681526020019081526020016000206003019080519060200190610e969291906110ac565b503360026000886000191660001916815260200190815260200160002060040160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506001905095945050505050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610f5e57600080fd5b82600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000019080519060200190610fb49291906110ac565b5081600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600101908051906020019061100b9291906110ac565b5083600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600190509392505050565b602060405190810160405280600081525090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106110ed57805160ff191683800117855561111b565b8280016001018555821561111b579182015b8281111561111a5782518255916020019190600101906110ff565b5b509050611128919061112c565b5090565b61114e91905b8082111561114a576000816000905550600101611132565b5090565b905600a165627a7a72305820f635cc0de07a8500897cc55c3abebe84157a10a3a23f17f40b7cf37773869d0a0029";

    //create certificate holder
    certificationContract = web3.eth.contract(abi).at(contractAddress);

    //add organization 
    var organizationAddress = document.getElementById("organization_address");
    var organizationName = document.getElementById("organization_name");
    var organizationDetails = document.getElementById("organization_details");
    var buttonAddOrganization = document.getElementById("button_add_organization");

    //display organization details
    var getOrganizationAddress = document.getElementById("get_organization_address");
    var buttonGetOrganizationDetails = document.getElementById("button_get_organization_details");
    var organizationDetailsName = document.getElementById("organization_details_name");
    var organizationDetailsDetails = document.getElementById("organization_details_details");

    //certify
    var certifyUIN = document.getElementById("certify_UIN");
    var certifyFirstName = document.getElementById("certify_first_name");
    var certifyLastName = document.getElementById("certify_last_name");
    var certifyCertifiedIN = document.getElementById("certify_certified_in");
    var certifyDate = document.getElementById("certify_date");
    var buttonCertify = document.getElementById("button_certify");

    //view certificate 
    var viewCertificateUIN = document.getElementById("view_certificate_UIN");
    var buttonViewCertificate = document.getElementById("button_view_certificate");
    var viewCertificateLine1 = document.getElementById("view_certificate_line1");
    var viewCertificateLine2 = document.getElementById("view_certificate_line2");
    var viewCertificateLine3 = document.getElementById("view_certificate_line3");
    var viewCertificateLine4 = document.getElementById("view_certificate_line4");
    var viewCertificateLine5 = document.getElementById("view_certificate_line5");
    var viewCertificateLine6 = document.getElementById("view_certificate_line6");
    var viewCertificateLine7 = document.getElementById("view_certificate_line7");

    //add organization
    buttonAddOrganization.addEventListener('click', function(){
      certificationContract.addOrganizations(organizationAddress.value, 
                                              organizationName.value, 
                                              organizationDetails.value, function(err, res){
        console.log(res);
        console.log(err);
      });
    })

    //view organization
    buttonGetOrganizationDetails.addEventListener('click', function(){
      certificationContract.organizationInfoDetails(getOrganizationAddress.value, function(err, res){
        organizationDetailsName.innerHTML = "<strong><big><b>Organization name :    " + res[0];
        organizationDetailsDetails.innerHTML = "<strong><b><big>Organization Details : " + res[1];
        console.log(res);
        console.log(err);
      });
    })

    //certify
    buttonCertify.addEventListener('click', function(){
      certificationContract.certifyStudents(certifyUIN.value, 
                                            certifyFirstName.value, 
                                            certifyLastName.value, 
                                            certifyCertifiedIN.value, 
                                            certifyDate.value, function(err, res){
        res;
        console.log(res);
        console.log(err);
      });
    })

    //view certificate
    buttonViewCertificate.addEventListener('click', function(){
        certificationContract.displayCertificates(viewCertificateUIN.value, function(err, res){
           view_certificate_line1.innerHTML = "<b><big><big><big><big><big><big><u><font size = '6'> </font>" + res[5];
           view_certificate_line2.innerHTML = "<big><b>This Degree of Certification is presented to ";
           view_certificate_line3.innerHTML = "<b><big><big><big><big><em><strong>" + res[0] + " " + res[1];
           view_certificate_line4.innerHTML = "<big><b>for sucessfully completing the course in ";
           view_certificate_line5.innerHTML = "<i><strong><big><b>" + res[2];
           view_certificate_line6.innerHTML = "<big><b>Certifed on : " + res[3];
           view_certificate_line7.innerHTML = "<big><b>Signed by : " + res[4];
            console.log(res);
            console.log(err);
        });
    })


  </script>
</body>